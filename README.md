# MangaLib Parser
**MangaLib Parser** – это кроссплатформенный скрипт для получения данных с одноимённого сайта в формате JSON. Он позволяет записать всю информацию о конкретной манге, а также её главах и содержании глав. Файлы на выходе совместимы с парсером API сайта [ReManga](https://remanga.org/).
## Порядок установки и использования
1. Установить Python версии не старше 3.9.7. При установке рекомендуется добавить в PATH.
2. Скачать [Google Chrome](https://www.google.by/intl/ru/chrome/) и установить в директорию по умолчанию.
3. В среду исполнения установить следующие пакеты: Selenium, BeautifulSoup4, lxml, webdriver-manager.
```
pip install selenium
pip install beautifulsoup4
pip install lxml
pip install webdriver-manager
```
4. Настроить скрипт путём редактирования *Settings.json*.
5. Открыть директорию со скриптом в консоли. Можно использовать метод "*cd*" и прописать путь к папке, либо открыть терминал из проводника.
6. Ввести нужную команду и дождаться завершения.

**Важно:** Рекомендуется использовать VPN наподобие [Psiphon 3](https://www.psiphon3.com/ug%40Latn/download.html), чтобы в случае блокировки по IP не потерять доступ к сайту. 
# Консольные команды
```
mlp scan
```
Получение и сохранение манифеста из "scan-target" в указанную директорию.
____
```
mlp parce [MANGA_ALIAS]
```
Парсинг одного тайтла, алиас которого нужно передать вторым аргументом.

**Пример:** mlp parce dr-stone
____
```
mlp parce -all
```
Парсинг по очереди всех тайтлов из *#Manifest.json*. Вы можете редактировать этот файл, чтобы вручную указывать диапазон работы.
____
```
mlp ubid [MANGA_ALIAS]
```
Выводит уникальный ID манги на основе десятиричного представления MD5 хеш-суммы алиаса. Для тайтлов с несколькими ветвями перевода данное значение может отличаться, потому что в таких случаях к ID ветви добавляется значение _bid_ перевода.

**Пример:** В результате выполнения функции было выведено значение 12345. В файле JSON ветви перевода будут обозначены 12345**678** и 12345**679**, где последняя часть является значением _bid_ из адресной строки главы (https://mangalib.me/manganame/v1/c1?bid=678).
____
```
mlp getsl [CHAPTER_URL]
```
Получает данные о слайдах конкретной главы из переданного URL (можно использовать как полный URL, так и значение из логов). Для этой команды функционируют настройки "_disable-age-limit-warning_" и "_sign-in_". Информация сохраняется в файл _#Slides.json_.

**Примечание:** Полезно, когда в логах вы видите ошибку о неполном парсинге главы. Просто скопируйте URL из лога, подставьте в команду, и на выходе получите полные данные о слайдах для восстановления JSON.
____
```
mlp -s
```
Аргумент «_**-s**_» выключает компьютер после завершения работы скрипта. Его можно добавить к любой другой команде.

# Settings.json
```
"save-directory" : ""
```
Задаёт директорию, в которую будут сохраняться файлы манги и манифест. По умолчанию загрузка происходит в папку "\manga".
____
```
"scan-target" : ""
```
Задаёт страницу каталога манги, откуда будет собран манифест. Указать URL страницы с аргументами сортировки. 

**Пример:** "https://mangalib.me/manga-list?page=2&status[]=2". В манифест будут записаны данные о манге со статусом «Завершено», вторая страница каталога.
____
```
"disable-age-limit-warning" : "true"
```
Отключает уведомление о возрастном ограничении. Необходимо для парсинга 16+ и 18+ тайтлов.
____
```
"sign-in" : false,
"email": "",
"password": ""
```
Указывает, проводить ли вход в аккаунт (только через логин и пароль, получить их можно в настройках сайта). Необходимо для парсинга 18+ тайтлов.
____
```
"slide-interval": 5
```
Устанавливает интервал в секундах между перелистыванием слайдов для уменьшения нагрузки на сервера [MangaLib](https://mangalib.me/). Помогает избежать блокировки по IP за быстрые автоматические запросы. Рекомендуемое значение: 5-15 секунд.

*Evolv Group. Copyright © 2018-2022.*
